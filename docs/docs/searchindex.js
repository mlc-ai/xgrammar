Search.setIndex({"docnames": ["api/python/bitmask_ops", "api/python/compiled_grammar", "api/python/configuration", "api/python/grammar", "api/python/grammar_compiler", "api/python/grammar_matcher", "api/python/index", "api/python/structural_tag", "api/python/testing", "api/python/tokenizer_info", "developer_guide/building_docs", "developer_guide/code_coverage", "index", "start/installation", "start/quick_start", "tutorials/advanced_topics", "tutorials/constrained_decoding", "tutorials/ebnf_guided_generation", "tutorials/engine_integration", "tutorials/json_generation", "tutorials/workflow_of_xgrammar", "xgrammar_features/javascript_api", "xgrammar_features/runtime_safeguards", "xgrammar_features/serialization"], "filenames": ["api/python/bitmask_ops.rst", "api/python/compiled_grammar.rst", "api/python/configuration.rst", "api/python/grammar.rst", "api/python/grammar_compiler.rst", "api/python/grammar_matcher.rst", "api/python/index.rst", "api/python/structural_tag.rst", "api/python/testing.rst", "api/python/tokenizer_info.rst", "developer_guide/building_docs.md", "developer_guide/code_coverage.md", "index.rst", "start/installation.md", "start/quick_start.md", "tutorials/advanced_topics.md", "tutorials/constrained_decoding.md", "tutorials/ebnf_guided_generation.md", "tutorials/engine_integration.md", "tutorials/json_generation.md", "tutorials/workflow_of_xgrammar.md", "xgrammar_features/javascript_api.md", "xgrammar_features/runtime_safeguards.md", "xgrammar_features/serialization.md"], "titles": ["Bitmask Operations", "xgr.CompiledGrammar", "Configuration", "xgr.Grammar", "xgr.GrammarCompiler", "xgr.GrammarMatcher", "XGrammar Python API", "Structural Tag", "xgr.testing", "xgr.TokenizerInfo", "Building Docs", "Code Coverage", "\ud83d\udc4b Welcome to XGrammar", "Installation", "Quick Start", "Advanced Topics", "Constrained Decoding", "EBNF-Guided Generation", "Integration with LLM Engine", "JSON Generation", "Workflow of XGrammar", "JavaScript API", "Runtime Safeguards", "Serialization"], "terms": {"xgr": [6, 14, 15, 16, 17, 19, 20, 22], "grammar": [6, 8, 16, 17, 18, 19, 22], "tokenizerinfo": [6, 8, 14, 15, 17, 19, 20], "grammarcompil": [6, 14, 15, 16, 17, 19, 20, 22, 23], "compiledgrammar": [6, 8, 16, 19, 20], "grammarmatch": [6, 8, 16, 17, 19, 20, 22], "test": [6, 11], "_json_schema_to_ebnf": [6, 8], "_regex_to_ebnf": [6, 8], "_ebnf_to_grammar_no_norm": [6, 8], "_get_matcher_from_grammar": [6, 8], "_is_grammar_accept_str": [6, 8], "_get_masked_tokens_from_bitmask": [6, 8], "_is_single_token_bitmask": [6, 8], "_bool_mask_to_bitmask": [6, 8], "_get_matcher_from_grammar_and_tokenizer_info": [6, 8], "_get_allow_empty_rule_id": [6, 8], "_generate_range_regex": [6, 8], "_generate_float_regex": [6, 8], "_print_grammar_fsm": [6, 8], "grammarfunctor": [6, 8], "structur": [6, 8, 12, 14, 16, 17, 19, 20, 23], "tag": 6, "bitmask": [6, 8, 15, 17, 19], "oper": [6, 13, 15, 22], "configur": [6, 11, 18], "recurs": [6, 13], "depth": [6, 22], "manag": [6, 10, 22], "util": 8, "The": [8, 10, 11, 12, 13, 14, 15, 16, 18, 21, 22, 23], "api": 8, "thi": [8, 10, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21], "modul": [8, 13], "ar": [8, 10, 11, 14, 15, 16, 17, 18, 19, 23], "us": [8, 10, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23], "debug": 8, "prone": 8, "chang": [8, 10, 23], "don": [8, 14], "t": [8, 14, 16, 17], "them": [8, 10, 18], "product": 8, "function": [8, 15], "class": [8, 16, 19, 22], "xgrammar": [8, 10, 11, 14, 15, 21, 22, 23], "schema": [8, 14, 15, 17, 19, 20], "union": 8, "str": [8, 19, 23], "type": [8, 16, 19, 23], "basemodel": [8, 19], "dict": 8, "ani": [8, 14], "any_whitespac": 8, "bool": [8, 20], "true": [8, 14, 15, 17, 18, 19], "indent": 8, "option": [8, 19], "int": [8, 19, 20], "none": 8, "separ": 8, "tupl": 8, "strict_mod": 8, "sourc": [8, 12], "convert": 8, "json": [8, 12, 14, 15, 16, 17, 18, 20, 23], "string": [8, 14, 15, 16, 17, 19, 20, 23], "bnf": [8, 17, 20], "For": [8, 10, 15, 16, 18, 19, 20, 21], "purpos": [8, 23], "paramet": [8, 15], "pydant": [8, 19], "model": [8, 13, 14, 15, 17, 18, 19, 20], "default": [8, 18, 22], "number": [8, 15], "space": 8, "If": [8, 13, 15, 20, 22, 23], "output": [8, 14, 16, 17, 19, 20], "one": [8, 19, 23], "line": 8, "two": [8, 15, 18, 19], "comma": 8, "colon": 8, "exampl": [8, 15, 16, 19], "when": [8, 10, 13, 16, 18, 20, 23], "i": [8, 10, 11, 12, 13, 15, 16, 17, 18, 19, 20, 21, 22, 23], "otherwis": [8, 18], "whether": 8, "strict": 8, "mode": 8, "In": [8, 11, 16, 17, 18, 19, 20], "gener": [8, 12, 16], "allow": [8, 16], "properti": [8, 19], "item": [8, 20, 22], "specifi": [8, 16, 17, 19], "equival": [8, 20], "set": [8, 11, 15, 16, 18, 20, 22], "unevaluatedproperti": 8, "unevaluateditem": 8, "fals": [8, 14, 17, 18, 19], "help": [8, 11, 14, 17, 19], "llm": [8, 12, 14, 16, 20, 21, 22], "accur": 8, "guid": [8, 14, 16, 18], "return": [8, 15, 23], "bnf_string": 8, "regex": [8, 15, 20], "with_rule_nam": 8, "follow": [8, 11, 13, 16, 17, 18, 23], "syntax": [8, 16], "javascript": [8, 12], "ecma": 8, "262": 8, "check": [8, 14, 20, 23], "http": [8, 10, 13], "develop": 8, "mozilla": 8, "org": 8, "en": 8, "u": [8, 17, 20], "doc": [8, 12], "web": [8, 21], "refer": [8, 10], "regular_express": 8, "tutori": [8, 17, 18, 19, 20], "current": [8, 17, 18, 22, 23], "featur": [8, 10, 20], "support": [8, 13, 18, 20, 23], "1": [8, 15, 16, 17, 18, 19, 20, 22, 23], "backrefer": 8, "2": [8, 14, 17, 18, 19], "non": [8, 10], "captur": 8, "group": 8, "name": [8, 13, 18, 19], "assert": [8, 17, 18, 19], "3": [8, 14, 17, 18, 19, 23], "unicod": 8, "charact": 8, "escap": [8, 17], "p": [8, 17, 18, 19], "4": 8, "word": 8, "boundari": 8, "b": [8, 18], "5": [8, 17], "6": 8, "quantifi": 8, "rang": [8, 17, 18, 19], "x": 8, "y": 8, "now": [8, 17, 18, 19], "user": [8, 14, 17, 19], "can": [8, 10, 11, 13, 14, 15, 16, 17, 18, 19, 20, 22, 23], "just": [8, 18], "repeat": 8, "element": 8, "workaround": 8, "method": [8, 20, 23], "primarili": 8, "intend": 8, "from": [8, 14, 16, 17, 18, 19, 20, 22, 23], "input": [8, 14, 15, 17, 19, 20], "ebnf_str": [8, 14, 20], "root_rule_nam": 8, "root": [8, 11, 17], "object": [8, 16, 19, 20, 23], "without": [8, 16], "normal": [8, 23], "result": [8, 15, 18], "cannot": 8, "compil": [8, 11, 16, 17, 18, 19, 21, 22, 23], "unnorm": 8, "kwarg": 8, "creat": 8, "token": [8, 13, 14, 15, 16, 17, 18, 19, 23], "info": [8, 17, 18, 19], "an": [8, 14, 16, 17, 18, 19, 20, 22], "empti": 8, "matcher": [8, 17, 18, 19, 22], "onli": [8, 15, 16], "accept": [8, 16, 17, 18, 19, 20], "either": 8, "contain": [8, 13, 17, 19, 20], "ebnf": [8, 12, 14, 15, 18, 20], "input_str": 8, "debug_print": 8, "print_tim": 8, "require_termin": 8, "print": [8, 13, 14, 17, 19, 20, 23], "inform": [8, 18, 20, 21], "dure": [8, 20, 23], "match": [8, 20, 23], "time": [8, 10, 15], "torch": [8, 14, 17, 18, 19, 20], "tensor": [8, 15, 17, 18, 19, 20], "vocab_s": [8, 14, 15, 17, 18, 19, 20], "index": 8, "0": [8, 14, 16, 17, 18, 19, 20], "list": [8, 17, 18, 19, 20], "get": [8, 16, 17, 18, 19, 22], "id": 8, "reject": 8, "mainli": [8, 17, 19], "should": [8, 14, 18, 20], "allocate_token_bitmask": [8, 15, 16, 17, 18, 19, 20], "fill": [8, 18, 20], "fill_next_token_bitmask": [8, 16, 17, 18, 19, 20, 22], "cpu": [8, 13, 14, 15, 17, 18, 19, 20], "batch": [8, 17, 19, 20], "infer": [8, 16, 17, 19], "ignor": 8, "rejected_token_id": 8, "A": [8, 17, 20], "singl": [8, 15, 16, 17, 18, 19], "size": [8, 15, 16, 20], "vocabulari": [8, 15, 16, 18, 20], "is_single_token": 8, "token_id": [8, 20, 22], "bool_mask": 8, "mask": [8, 16, 17, 18, 19, 20], "doe": [8, 23], "align": [8, 16], "32": [8, 20], "bit": 8, "block": [8, 22], "add": 8, "extra": [8, 17, 19], "pad": [8, 17, 18, 19], "each": [8, 10, 16, 17, 18, 19, 20, 23], "valu": 8, "mean": [8, 22], "while": [8, 20], "tokenizer_info": [8, 14, 15, 17, 18, 19, 20, 22, 23], "about": [8, 15, 16, 20], "addit": 8, "keyword": 8, "argument": 8, "pass": [8, 18, 20], "constructor": 8, "compiled_grammar": [8, 14, 17, 18, 19, 20, 23], "start": 8, "end": [8, 17, 19], "float": 8, "fsm": 8, "initi": 8, "process": [8, 15, 16, 20, 22, 23], "base": [8, 10, 18], "transform": [8, 14, 18, 20, 23], "These": 8, "call": [8, 18, 20], "pars": [8, 16, 22], "static": 8, "structure_norm": 8, "rule_inlin": 8, "inlin": 8, "some": [8, 18], "rule": 8, "byte_string_fus": 8, "fuse": 8, "byte": 8, "dead_code_elimin": 8, "elimin": 8, "referenc": [8, 10], "lookahead_assertion_analyz": 8, "analyz": 8, "lookahead": 8, "sphinx": 10, "document": [10, 14], "host": 10, "written": [10, 13], "markdown": 10, "md": 10, "prefer": 10, "restructuredtext": 10, "rst": 10, "instal": [10, 12, 14, 21], "depend": [10, 13], "debian": 10, "system": [10, 13, 14, 17, 19], "conda": [10, 13, 17, 18, 19], "environ": [10, 17, 18, 19], "your": [10, 15, 17, 18, 19], "packag": 10, "rubi": 10, "sudo": 10, "apt": 10, "updat": [10, 13, 17, 18, 19, 23], "full": 10, "python": [10, 12, 14, 21], "m": [10, 13], "pip": [10, 13, 17, 18, 19], "r": [10, 17], "requir": [10, 13, 19, 20], "txt": 10, "gem": 10, "jekyl": 10, "remot": 10, "theme": 10, "bash": [10, 13], "script": [10, 11, 13], "local_deploy_sit": 10, "sh": [10, 11, 13], "websit": 10, "localhost": 10, "8888": 10, "built": [10, 13, 14, 18, 19], "automat": [10, 13], "you": [10, 11, 13, 14, 15, 17, 18, 19, 20, 22, 23], "merg": 10, "main": [10, 17, 18, 19], "branch": 10, "workflow": [10, 12, 16], "defin": [10, 15], "yaml": 10, "upload": 10, "gh": 10, "ad": [10, 23], "new": [10, 14, 23], "pleas": [10, 11, 20], "accordingli": 10, "make": [10, 13, 16, 17, 18, 19], "need": [10, 13, 18, 23], "see": [10, 14, 16, 17, 18, 19, 21], "sure": [10, 17, 18, 19], "correct": [10, 16, 23], "code": [10, 12, 17, 18, 19, 21, 22], "repositori": 10, "specif": [10, 13, 14, 17, 20], "releas": [10, 15], "version": [10, 13], "instead": [10, 23], "run_coverag": 11, "offer": 11, "wai": [11, 14, 18], "librari": [11, 17, 18, 19], "To": [11, 14, 15, 18, 20, 21], "run": [11, 15, 19, 21], "step": [11, 17, 18, 19], "config": [11, 13, 14, 15, 17, 18, 19], "cmake": [11, 13], "variabl": 11, "xgrammar_enable_coverag": 11, "ON": 11, "directori": 11, "after": [11, 16, 18, 20], "find": 11, "report": [11, 14, 16], "coverage_report": 11, "note": [11, 15, 16, 17, 18, 19, 23], "tool": 11, "mere": 11, "aid": 11, "identifi": [11, 23], "which": [11, 18, 22], "part": 11, "have": [11, 13, 14, 16, 17, 18, 19, 20], "been": [11, 16], "howev": 11, "pursu": 11, "100": 11, "advis": 11, "It": [11, 14, 15, 16, 17, 18, 19, 20, 21, 22], "actual": [11, 17, 18, 19], "neg": [11, 16, 18], "consequ": 11, "open": [12, 14], "solut": 12, "flexibl": [12, 14, 17], "portabl": 12, "fast": [12, 20], "mission": 12, "project": [12, 13], "bring": 12, "zero": 12, "overhead": [12, 17, 18, 19], "everywher": 12, "quick": 12, "constrain": [12, 20], "decod": [12, 14, 17, 19, 20], "advanc": [12, 20], "topic": [12, 20], "integr": [12, 16, 17, 19, 20], "engin": [12, 20], "runtim": [12, 20], "safeguard": 12, "build": [12, 20], "coverag": 12, "directli": [13, 15, 16, 20], "variou": 13, "platform": 13, "linux": 13, "maco": 13, "window": 13, "hardwar": 13, "nvidia": 13, "gpu": [13, 14, 17, 18, 19, 20], "amd": 13, "appl": 13, "silicon": 13, "tpu": 13, "etc": [13, 17, 19, 20], "9": [13, 17], "later": [13, 18], "we": [13, 15, 16, 17, 18, 19, 20, 23], "provid": [13, 14, 16, 17, 19, 20, 21, 22, 23], "wheel": 13, "via": [13, 18], "also": [13, 15, 16, 17, 18, 19, 20, 21, 22], "forg": 13, "command": 13, "verifi": 13, "import": [13, 14, 17, 18, 19, 20, 22, 23], "path": 13, "env": 13, "lib": 13, "python3": 13, "11": 13, "site": 13, "__init__": 13, "py": 13, "want": [13, 16], "modif": 13, "obtain": 13, "git": 13, "clone": 13, "github": [13, 14], "com": 13, "mlc": [13, 21], "ai": [13, 21], "cd": 13, "pre": [13, 18], "commit": 13, "copi": 13, "cp": 13, "isol": [13, 17, 18, 19], "e": [13, 23], "edit": 13, "rebuild": 13, "huggingfac": [13, 14, 20], "all": [13, 17, 18, 19], "includ": [13, 15, 18, 20, 22, 23], "ones": 13, "gate": 13, "cli": 13, "login": 13, "your_hf_token": 13, "pytest": 13, "do": [13, 16], "subset": 13, "hf_token_requir": 13, "rust": 13, "ninja": 13, "mkdir": 13, "g": [13, 23], "run_ctest": 13, "whose": 13, "test_nam": 13, "introduc": [14, 17, 19, 20], "how": [14, 17, 18, 19, 20], "focus": 14, "most": [14, 15, 18, 20], "case": [14, 16, 18], "alreadi": [14, 16], "instanti": [14, 17, 18, 19], "automodelforcausallm": [14, 17, 19, 20], "autotoken": [14, 17, 18, 19, 20, 23], "autoconfig": [14, 15, 17, 18, 19], "devic": [14, 17, 18, 19, 20], "cuda": [14, 17, 18, 19, 20], "Or": [14, 17, 19], "model_nam": [14, 17, 19], "meta": [14, 17, 18, 19, 23], "llama": [14, 17, 18, 19, 23], "1b": [14, 17, 18, 19], "instruct": [14, 17, 18, 19, 23], "from_pretrain": [14, 15, 17, 18, 19, 20, 23], "torch_dtyp": [14, 17, 19], "float32": [14, 17, 19], "device_map": [14, 17, 19], "messag": [14, 17, 19], "role": [14, 17, 19], "content": [14, 16, 17, 19], "assist": [14, 17, 19], "yourself": [14, 17, 19], "briefli": [14, 17], "text": [14, 16, 17, 19, 20], "apply_chat_templ": [14, 17, 19], "add_generation_prompt": [14, 17, 19], "model_input": [14, 17, 19], "return_tensor": [14, 17, 19], "pt": [14, 17, 19], "construct": [14, 15, 16, 17, 18, 19, 20, 23], "more": [14, 16, 17, 20, 21], "custom": [14, 17, 19, 20], "gbnf": [14, 17], "from_huggingfac": [14, 17, 18, 19, 20, 23], "grammar_compil": [14, 15, 17, 19, 20], "compile_builtin_json_grammar": [14, 18, 19, 20], "other": [14, 18], "compile_json_schema": [14, 15, 19, 20], "json_schema_str": [14, 20], "compile_grammar": [14, 15, 17, 20, 23], "logits_processor": [14, 17, 19], "xgr_logits_processor": [14, 17, 19], "contrib": [14, 17, 19], "hf": 14, "logitsprocessor": [14, 17, 19], "generated_id": [14, 17, 19], "max_new_token": [14, 17, 19], "512": [14, 17, 19], "len": [14, 17, 18, 19], "input_id": [14, 17, 19, 20], "skip_special_token": [14, 17, 19], "out": [14, 18], "detail": [14, 16], "usag": [14, 15], "problem": 14, "ask": 14, "question": 14, "issu": [14, 16], "our": [14, 18], "repo": 14, "section": [15, 17, 18, 19], "cover": 15, "acceler": [15, 20], "comput": [15, 20], "multithread": [15, 18], "multipl": [15, 23], "parallel": 15, "compile_": 15, "gil": 15, "so": [15, 16, 17, 18, 19, 20], "asyncio": [15, 20], "max_thread": [15, 17, 18, 19], "control": [15, 16], "maximum": [15, 22], "recommend": [15, 16, 17, 18, 19], "half": 15, "": [15, 18, 19, 20, 23], "virtual": [15, 17, 18, 19], "core": [15, 20], "optim": 15, "perform": [15, 20, 23], "8": [15, 17, 18, 19], "async": 15, "def": 15, "submit": 15, "sequenc": 15, "future1": 15, "to_thread": 15, "grammar1": 15, "future2": 15, "grammar2": 15, "wait": 15, "both": 15, "futur": 15, "complet": [15, 16, 20], "compiled_grammar1": 15, "await": 15, "compiled_grammar2": 15, "same": [15, 16, 18, 20, 23], "again": [15, 20], "cache_en": 15, "enabl": [15, 17, 18, 19], "cache_limit_byt": [15, 22], "memori": [15, 20], "lru": [15, 22], "least": [15, 16, 22], "recent": [15, 16, 22], "evict": [15, 22], "polici": 15, "pattern": [15, 20], "kei": [15, 18], "compile_regex": [15, 20], "respect": 15, "By": [15, 16], "further": [15, 20], "reduc": 15, "spent": 15, "128": 15, "1024": 15, "immidi": 15, "clear_cach": 15, "sometim": [15, 16], "shape": [15, 17, 18, 19, 20], "larger": [15, 17, 18, 19], "than": [15, 17, 18, 19], "becaus": [15, 16, 20], "deepseek": 15, "v3": 15, "815": 15, "its": [15, 16, 17, 18, 19, 20], "probabl": [15, 16], "distribut": [15, 16], "ha": [15, 16, 18, 22, 23], "dimens": 15, "129": 15, "280": 15, "alwai": [15, 16, 17, 18, 19, 23], "treat": 15, "129280": 15, "token_bitmask": [15, 17, 18, 19, 20], "found": 15, "model_path": 15, "techniqu": 16, "prohibit": 16, "those": 16, "binari": 16, "length": [16, 18], "sampl": [16, 17, 18, 19, 20], "stage": 16, "must": [16, 23], "valid": [16, 17, 18, 19], "let": 16, "take": 16, "closer": 16, "look": 16, "appli": [16, 17, 18, 19, 20], "logit": [16, 17, 19, 20], "infti": 16, "softmax": [16, 17, 18, 19, 20], "Then": [16, 17, 18, 19], "sampler": 16, "vaild": 16, "ensur": [16, 17, 19], "conform": 16, "given": [16, 20], "guarante": 16, "entir": 16, "adher": [16, 19], "benefit": 16, "applic": 16, "increas": 16, "qualiti": 16, "nearli": 16, "mistak": 16, "might": 16, "integ": [16, 19], "field": [16, 19], "like": 16, "23": 16, "even": 16, "wrong": 16, "easi": [16, 18, 20], "clean": 16, "extran": 16, "error": 16, "parsabl": 16, "seamlessli": 16, "downstream": 16, "safeti": 16, "avoid": [16, 22], "unexpect": 16, "prevent": 16, "erron": 16, "There": [16, 18], "mani": 16, "agent": 16, "abil": 16, "especi": 16, "valuabl": 16, "todai": 16, "minim": 16, "impact": 16, "capabl": 16, "respons": [16, 17, 18, 19], "constraint": 16, "doesn": 16, "anyth": 16, "But": [16, 18], "fail": [16, 23], "produc": [16, 20], "answer": 16, "describ": [16, 20], "expect": 16, "prompt": 16, "affect": 16, "underli": 16, "much": 16, "possibl": 16, "store": [16, 22, 23], "compress": [16, 20], "bitset": [16, 20], "format": [16, 17, 20, 23], "int32": [16, 20], "alloc": [16, 17, 18, 19, 20], "speed": 16, "up": [16, 18], "state": [16, 17, 18, 19], "last": [16, 20], "accept_token": [16, 17, 18, 19, 20, 22], "learn": [16, 20], "effici": [17, 18, 19], "besid": [17, 21], "first": [17, 18, 19, 20], "go": [17, 18, 19], "over": [17, 18, 19], "achiev": [17, 19, 20], "avail": [17, 18, 19], "snippet": [17, 18, 19], "below": [17, 18, 19], "runnabl": [17, 18, 19], "simul": [17, 18, 19], "necessari": [17, 18, 19, 20], "numpi": [17, 18, 19], "np": [17, 18, 19], "extract": [17, 19], "With": [17, 18, 19, 20], "choic": [17, 18, 19], "model_id": [17, 18, 19], "due": [17, 18, 19], "full_vocab_s": [17, 18, 19], "ggml": 17, "here": [17, 18, 19], "ebnf_grammar_str": 17, "expr": 17, "term": 17, "num": 17, "interact": [17, 18, 19], "maintain": [17, 18, 19], "request": [17, 18, 19], "auto": [17, 19], "regress": [17, 19], "sim_sampled_respons": [17, 18, 19], "16": 17, "end_of_text": [17, 18, 19], "sim_sampled_token_id": [17, 18, 19], "encod": [17, 18, 19], "add_special_token": [17, 18, 19], "loop": [17, 18, 19], "iter": [17, 18, 19], "sim_token_id": [17, 18, 19], "enumer": [17, 18, 19], "randn": [17, 18, 19], "invalid": [17, 18, 19], "apply_token_bitmask_inplac": [17, 18, 19, 20], "next": [17, 18, 19], "prob": [17, 18, 19, 20], "dim": [17, 18, 19, 20], "next_token_id": [17, 18, 19, 20], "random": [17, 18, 19], "enforc": [17, 18, 19], "inde": [17, 18, 19], "sinc": [17, 18, 19], "stop": [17, 18, 19], "termin": [17, 18, 19, 20], "is_termin": [17, 18, 19, 20], "reset": [17, 18, 19, 20], "readi": [17, 18, 19], "easili": [17, 19], "aim": [17, 19], "access": [17, 19, 20], "mai": [17, 19, 22], "repres": 17, "json_grammar_ebnf_str": 17, "basic_arrai": 17, "basic_object": 17, "basic_ani": 17, "basic_numb": 17, "basic_str": 17, "basic_boolean": 17, "basic_nul": 17, "basic_integ": 17, "ee": 17, "basic_string_1": 17, "x00": 17, "x1f": 17, "bfnrt": 17, "fa": 17, "f0": 17, "null": 17, "w": 17, "n": 17, "final": [17, 18, 19], "compon": [18, 20], "lai": 18, "concept": 18, "demonstr": 18, "per": [18, 22], "encapsul": 18, "sever": 18, "conveni": 18, "former": 18, "being": 18, "safe": 18, "accord": 18, "therefor": [18, 23], "persist": 18, "differ": 18, "behavior": 18, "enable_cach": 18, "cach": [18, 20, 23], "everi": 18, "thing": 18, "seen": 18, "rather": 18, "own": 18, "essenti": 18, "batch_siz": [18, 20], "implement": 18, "kernel": 18, "illeg": 18, "infin": 18, "never": 18, "prepar": 18, "abov": [18, 20], "assum": 18, "work": 18, "exact": 18, "sai": 18, "simplic": 18, "thei": 18, "loop_it": 18, "paralleliz": 18, "thread": 18, "estim": 18, "One": 19, "three": 19, "pick": 19, "person": 19, "ag": 19, "person_schema": 19, "titl": 19, "dump": 19, "read": 20, "understand": 20, "free": 20, "form": 20, "context": [20, 22], "extend": 20, "from_json_schema": 20, "builtin_json_grammar": [20, 23], "from_regex": 20, "regex_str": 20, "from_ebnf": 20, "raw": 20, "tiktoken": 20, "sentencepiec": 20, "backend": 20, "preprocess": 20, "simplifi": 20, "automata": [20, 22], "adapt": 20, "real": 20, "bound": 20, "associ": [20, 23], "save": 20, "ceil": 20, "dtype": 20, "locat": 20, "logic": 20, "handl": 20, "grammar_match": 20, "modifi": 20, "place": 20, "move": 20, "argmax": 20, "introduct": 20, "write": 20, "hug": 20, "face": 20, "seq_len": 20, "append": 20, "eo": 20, "congratul": 20, "successfulli": 20, "c": 21, "typescript": 21, "j": 21, "sdk": 21, "emscripten": 21, "webassembli": 21, "design": 21, "browser": 21, "webllm": 21, "npm": 21, "mechan": 22, "server": 22, "crash": 22, "pushdown": 22, "parser": 22, "involv": 22, "veri": 22, "deep": 22, "caus": 22, "stack": 22, "overflow": 22, "set_max_recursion_depth": 22, "get_max_recursion_depth": 22, "10000": 22, "exce": 22, "accept_str": 22, "find_jump_forward_str": 22, "rais": [22, 23], "runtimeerror": [22, 23], "max_recursion_depth": 22, "grow": 22, "too": 22, "larg": 22, "algorithm": 22, "cross": 23, "node": 23, "commun": 23, "serialize_json": 23, "deserialize_json": 23, "grammar_json": 23, "f": 23, "grammar_deseri": 23, "8b": 23, "tokenizer_info_json": 23, "tokenizer_info_deseri": 23, "share": 23, "metadata": 23, "origin": 23, "compiled_grammar_json": 23, "compiled_grammar_deseri": 23, "intern": 23, "data": 23, "std": 23, "runtime_error": 23}, "objects": {"xgrammar": [[8, 0, 0, "-", "testing"]], "xgrammar.testing": [[8, 1, 1, "", "GrammarFunctor"], [8, 3, 1, "", "_bool_mask_to_bitmask"], [8, 3, 1, "", "_ebnf_to_grammar_no_normalization"], [8, 3, 1, "", "_generate_float_regex"], [8, 3, 1, "", "_generate_range_regex"], [8, 3, 1, "", "_get_allow_empty_rule_ids"], [8, 3, 1, "", "_get_masked_tokens_from_bitmask"], [8, 3, 1, "", "_get_matcher_from_grammar"], [8, 3, 1, "", "_get_matcher_from_grammar_and_tokenizer_info"], [8, 3, 1, "", "_is_grammar_accept_string"], [8, 3, 1, "", "_is_single_token_bitmask"], [8, 3, 1, "", "_json_schema_to_ebnf"], [8, 3, 1, "", "_print_grammar_fsms"], [8, 3, 1, "", "_regex_to_ebnf"]], "xgrammar.testing.GrammarFunctor": [[8, 2, 1, "", "byte_string_fuser"], [8, 2, 1, "", "dead_code_eliminator"], [8, 2, 1, "", "lookahead_assertion_analyzer"], [8, 2, 1, "", "rule_inliner"], [8, 2, 1, "", "structure_normalizer"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"]}, "titleterms": {"bitmask": [0, 18, 20], "oper": 0, "xgr": [1, 3, 4, 5, 8, 9, 18, 23], "compiledgrammar": [1, 18, 23], "configur": 2, "recurs": [2, 22], "depth": 2, "manag": 2, "grammar": [3, 14, 15, 20, 23], "grammarcompil": [4, 18], "grammarmatch": [5, 18], "xgrammar": [6, 12, 13, 16, 17, 18, 19, 20], "python": [6, 13], "api": [6, 12, 21], "structur": [7, 18], "tag": 7, "test": [8, 13], "tokenizerinfo": [9, 18, 23], "build": [10, 13], "doc": 10, "local": 10, "deploi": 10, "github": 10, "page": 10, "best": 10, "practic": 10, "write": 10, "code": 11, "coverag": 11, "welcom": 12, "get": 12, "start": [12, 14], "tutori": 12, "featur": 12, "develop": 12, "guid": [12, 17], "refer": 12, "instal": [13, 17, 18, 19], "method": 13, "1": 13, "prebuilt": 13, "packag": 13, "2": 13, "from": 13, "sourc": 13, "option": 13, "run": 13, "3": 13, "c": 13, "librari": 13, "onli": 13, "quick": 14, "prepar": 14, "compil": [14, 15, 20], "gener": [14, 17, 18, 19, 20], "what": 14, "do": 14, "next": [14, 16, 20], "advanc": 15, "topic": 15, "multi": 15, "thread": 15, "cach": [15, 22], "handl": 15, "pad": 15, "llm": [15, 17, 18, 19], "output": 15, "logit": [15, 18], "constrain": 16, "decod": 16, "": 16, "implement": 16, "step": [16, 20], "ebnf": 17, "engin": [17, 18, 19], "try": [17, 19], "out": [17, 19], "via": [17, 19], "hf": [17, 19], "transform": [17, 19], "integr": 18, "high": 18, "level": 18, "flow": 18, "auto": 18, "regress": 18, "batch": 18, "infer": 18, "json": 19, "workflow": 20, "token": 20, "info": 20, "matcher": 20, "The": 20, "loop": 20, "javascript": 21, "runtim": 22, "safeguard": 22, "limit": 22, "size": 22, "serial": 23, "usag": 23, "deseri": 23, "error": 23, "version": 23, "mismatch": 23}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "nbsphinx": 4, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"Bitmask Operations": [[0, "bitmask-operations"]], "xgr.CompiledGrammar": [[1, "xgr-compiledgrammar"], [18, "xgr-compiledgrammar"], [23, "xgr-compiledgrammar"]], "Configuration": [[2, "configuration"]], "Recursion Depth Management": [[2, "recursion-depth-management"]], "xgr.Grammar": [[3, "xgr-grammar"], [23, "xgr-grammar"]], "xgr.GrammarCompiler": [[4, "xgr-grammarcompiler"], [18, "xgr-grammarcompiler"]], "xgr.GrammarMatcher": [[5, "xgr-grammarmatcher"], [18, "xgr-grammarmatcher"]], "XGrammar Python API": [[6, "xgrammar-python-api"]], "Structural Tag": [[7, "structural-tag"]], "xgr.testing": [[8, "module-xgrammar.testing"]], "xgr.TokenizerInfo": [[9, "xgr-tokenizerinfo"], [18, "xgr-tokenizerinfo"], [23, "xgr-tokenizerinfo"]], "Building Docs": [[10, "building-docs"]], "Building Docs Locally": [[10, "building-docs-locally"]], "Deploying Docs on GitHub Pages": [[10, "deploying-docs-on-github-pages"]], "Best Practices for Writing Docs": [[10, "best-practices-for-writing-docs"]], "Code Coverage": [[11, "code-coverage"]], "\ud83d\udc4b Welcome to XGrammar": [[12, "welcome-to-xgrammar"]], "Get Started": [[12, null]], "Tutorials": [[12, null]], "XGrammar Features": [[12, null]], "Developer Guide": [[12, null]], "API Reference": [[12, null]], "Installation": [[13, "installation"]], "Method 1: Prebuilt Package": [[13, "method-1-prebuilt-package"]], "Method 2: Build XGrammar Python Package from Source": [[13, "method-2-build-xgrammar-python-package-from-source"]], "Optional: Run Python Tests": [[13, "optional-run-python-tests"]], "Method 3: Build XGrammar C++ Library Only": [[13, "method-3-build-xgrammar-c-library-only"]], "Optional: Run C++ Tests": [[13, "optional-run-c-tests"]], "Quick Start": [[14, "quick-start"]], "Preparation": [[14, "preparation"]], "Compile Grammar": [[14, "compile-grammar"]], "Generate with grammar": [[14, "generate-with-grammar"]], "What to Do Next": [[14, "what-to-do-next"]], "Advanced Topics": [[15, "advanced-topics"]], "Multi-threaded Grammar Compilation and Cache": [[15, "multi-threaded-grammar-compilation-and-cache"]], "Handle Padding to the LLM Output Logits": [[15, "handle-padding-to-the-llm-output-logits"]], "Constrained Decoding": [[16, "constrained-decoding"]], "XGrammar\u2019s Implementation": [[16, "xgrammar-s-implementation"]], "Next Steps": [[16, "next-steps"], [20, "next-steps"]], "EBNF-Guided Generation": [[17, "ebnf-guided-generation"]], "Install XGrammar": [[17, "install-xgrammar"], [18, "install-xgrammar"], [19, "install-xgrammar"]], "EBNF-Guided Generation in LLM Engines": [[17, "ebnf-guided-generation-in-llm-engines"]], "Try out via HF Transformers": [[17, "try-out-via-hf-transformers"], [19, "try-out-via-hf-transformers"]], "Integration with LLM Engine": [[18, "integration-with-llm-engine"]], "High-Level Flow": [[18, "high-level-flow"]], "Bitmasking Logits in Auto-regressive Generation": [[18, "bitmasking-logits-in-auto-regressive-generation"]], "Structured Generation for Batched Inference": [[18, "structured-generation-for-batched-inference"]], "JSON Generation": [[19, "json-generation"]], "JSON Generation in LLM Engines": [[19, "json-generation-in-llm-engines"]], "Workflow of XGrammar": [[20, "workflow-of-xgrammar"]], "Grammar": [[20, "grammar"]], "Tokenizer Info": [[20, "tokenizer-info"]], "Grammar Compiler": [[20, "grammar-compiler"]], "Compiled Grammar": [[20, "compiled-grammar"]], "Token Bitmask": [[20, "token-bitmask"]], "Grammar Matcher": [[20, "grammar-matcher"]], "The Generation Loop": [[20, "the-generation-loop"]], "JavaScript API": [[21, "javascript-api"]], "Runtime Safeguards": [[22, "runtime-safeguards"]], "Recursion Limit": [[22, "recursion-limit"]], "Cache Size Limit": [[22, "cache-size-limit"]], "Serialization": [[23, "serialization"]], "Usage": [[23, "usage"]], "Deserialization Errors": [[23, "deserialization-errors"]], "Serialization Version Mismatch": [[23, "serialization-version-mismatch"]]}, "indexentries": {"grammarfunctor (class in xgrammar.testing)": [[8, "xgrammar.testing.GrammarFunctor"]], "_bool_mask_to_bitmask() (in module xgrammar.testing)": [[8, "xgrammar.testing._bool_mask_to_bitmask"]], "_ebnf_to_grammar_no_normalization() (in module xgrammar.testing)": [[8, "xgrammar.testing._ebnf_to_grammar_no_normalization"]], "_generate_float_regex() (in module xgrammar.testing)": [[8, "xgrammar.testing._generate_float_regex"]], "_generate_range_regex() (in module xgrammar.testing)": [[8, "xgrammar.testing._generate_range_regex"]], "_get_allow_empty_rule_ids() (in module xgrammar.testing)": [[8, "xgrammar.testing._get_allow_empty_rule_ids"]], "_get_masked_tokens_from_bitmask() (in module xgrammar.testing)": [[8, "xgrammar.testing._get_masked_tokens_from_bitmask"]], "_get_matcher_from_grammar() (in module xgrammar.testing)": [[8, "xgrammar.testing._get_matcher_from_grammar"]], "_get_matcher_from_grammar_and_tokenizer_info() (in module xgrammar.testing)": [[8, "xgrammar.testing._get_matcher_from_grammar_and_tokenizer_info"]], "_is_grammar_accept_string() (in module xgrammar.testing)": [[8, "xgrammar.testing._is_grammar_accept_string"]], "_is_single_token_bitmask() (in module xgrammar.testing)": [[8, "xgrammar.testing._is_single_token_bitmask"]], "_json_schema_to_ebnf() (in module xgrammar.testing)": [[8, "xgrammar.testing._json_schema_to_ebnf"]], "_print_grammar_fsms() (in module xgrammar.testing)": [[8, "xgrammar.testing._print_grammar_fsms"]], "_regex_to_ebnf() (in module xgrammar.testing)": [[8, "xgrammar.testing._regex_to_ebnf"]], "byte_string_fuser() (xgrammar.testing.grammarfunctor static method)": [[8, "xgrammar.testing.GrammarFunctor.byte_string_fuser"]], "dead_code_eliminator() (xgrammar.testing.grammarfunctor static method)": [[8, "xgrammar.testing.GrammarFunctor.dead_code_eliminator"]], "lookahead_assertion_analyzer() (xgrammar.testing.grammarfunctor static method)": [[8, "xgrammar.testing.GrammarFunctor.lookahead_assertion_analyzer"]], "module": [[8, "module-xgrammar.testing"]], "rule_inliner() (xgrammar.testing.grammarfunctor static method)": [[8, "xgrammar.testing.GrammarFunctor.rule_inliner"]], "structure_normalizer() (xgrammar.testing.grammarfunctor static method)": [[8, "xgrammar.testing.GrammarFunctor.structure_normalizer"]], "xgrammar.testing": [[8, "module-xgrammar.testing"]]}})